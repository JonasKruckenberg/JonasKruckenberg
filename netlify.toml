[[plugins]]
package = "netlify-plugin-inline-critical-css"

[[plugins]]
package = "netlify-plugin-cache"
  [plugins.inputs]
  paths = [
    "~/.cargo/bin/",
    "~/.cargo/registry/index/",
    "~/.cargo/registry/cache/",
    "~/.cargo/git/db/",
    "target/"
  ]

[[plugins]]
  package = "@netlify/plugin-lighthouse"
 
  # optional, fails build when a category is below a threshold
  [plugins.inputs.thresholds]
    performance = 0.9
    accessibility = 0.9
    best-practices = 0.9
    seo = 0.9
    pwa = 0

[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[build]
command = """
npm install -g terser
wget -qO- https://github.com/thedodd/trunk/releases/download/0.16.0/trunk-x86_64-unknown-linux-gnu.tar.gz | tar -xzf-
export CARGO_UNSTABLE_SPARSE_REGISTRY=true
trunk build --release
"""